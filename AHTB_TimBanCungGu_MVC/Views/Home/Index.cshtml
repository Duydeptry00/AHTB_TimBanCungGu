@using System.Linq
@model IEnumerable<AHTB_TimBanCungGu_API.Models.Phim>

<div class="slider">
    <!-- list Items -->
    <div class="list">
        @foreach (var phim in Model)
        {
            <div class="item @(Model.First() == phim ? "active" : "")">
                <img src="/images/@phim.HinhAnh"> <!-- Đường dẫn ảnh từ cơ sở dữ liệu -->
                <div class="content">
                    <h1>@phim.TenPhim</h1> <!-- Tên phim -->
                    <div class="rating">
                        <span>@phim.DanhGia/10</span> <!-- Hiển thị số điểm trên 10 -->
                    </div>
                    <!-- Hiển thị tên thể loại -->
                    <p>@phim.DienVien</p>
                    <p>@phim.TheLoai.TenTheLoai</p> <!-- Tên thể loại từ bảng TheLoai -->
                    <div class="icon-container">
                        <!-- Add Icon Button -->
                        <button class="btn btn-primary btn-icon btn-icon-add" title="Thêm Phim">
                            <i class="bi bi-plus"></i>
                        </button>

                        <!-- Start Playing Icon Button -->
                        <button class="btn btn-success btn-icon btn-icon-start" title="Bắt đầu chạy phim">
                            <i class="bi bi-play"></i>
                        </button>
                    </div>
                    <h4 style="margin-top: 5px;">@phim.MoTa</h4> <!-- Mô tả phim -->
                </div>
            </div>
        }
    </div>
</div>

<div class="arrows">
    <button id="prev"><</button>
    <button id="next">></button>
</div>

<div class="thumbnail">
    @foreach (var phim in Model)
    {
        <div class="item @(Model.First() == phim ? "active" : "")">
            <img src="/images/@phim.HinhAnh" style="margin: 2px"> <!-- Ảnh nhỏ của phim -->
        </div>
    }
</div>

<script src="/js/app.js"></script>
<script>
    const socket = new WebSocket('http://localhost:60771/Admin/ThongTinCaNhans/ConnectWebSocket');

    socket.onmessage = function (event) {
        // Hiển thị thông báo ở giữa màn hình bằng SweetAlert2
        Swal.fire({
            title: 'Thông Báo',
            html: event.data,
            icon: 'warning',
            confirmButtonText: 'Đóng',
            timer: 5000, // Tự động đóng sau 5 giây
            timerProgressBar: true,
            position: 'center', // Hiển thị ở giữa màn hình
            showConfirmButton: false, // Ẩn nút Đóng nếu muốn chỉ hiển thị trong vài giây
            customClass: {
                popup: 'swal2-popup-custom', // Thêm class để tùy chỉnh giao diện
            }
        });
    };

    socket.onopen = function () {
        console.log("WebSocket is open.");
    };

    socket.onclose = function () {
        console.log("WebSocket closed.");
    };

    socket.onerror = function (error) {
        console.log("WebSocket error:", error);
    };
</script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">


